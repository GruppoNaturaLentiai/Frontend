{"version":3,"file":"component---src-templates-post-tsx-15ffd503f33bf5f1c466.js","mappings":"mOAgEA,UAjCqEA,IAE/D,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAFgE,KACpEC,GACDL,EACC,MAAMM,EAAOD,EAAKE,WAElB,IAAKD,EACH,OAAOE,EAAAA,cAACC,EAAAA,EAAa,KAACD,EAAAA,cAAA,SAAG,qBAG3B,MAAME,EAAcJ,EAAKK,OAAS,aAC5BC,EAAoBN,EAAKO,aAAe,KACxCC,EAAaR,EAAKS,UAAY,KAC9BC,EAASV,EAAKU,QAAU,KAExBC,GAAuB,QAAVhB,EAAAK,EAAKY,aAAK,IAAAjB,GAAO,QAAPC,EAAVD,EAAYkB,aAAK,IAAAjB,OAAP,EAAVA,EAAmBkB,UAAW,GAC3CC,GAAwB,QAAVlB,EAAAG,EAAKY,aAAK,IAAAf,GAAO,QAAPC,EAAVD,EAAYgB,aAAK,IAAAf,OAAP,EAAVA,EAAmBkB,uBAAmBC,EAG1D,OACEf,EAAAA,cAACC,EAAAA,EAAa,KACZD,EAAAA,cAACgB,EAAAA,EAAI,CACHd,YAAaA,EACbE,kBAAmBA,QAAAA,EAAqB,GACxCS,YAAaA,EACbI,eAAkC,GAClCX,WAAYA,EACZE,OAAQA,QAAAA,EAAU,GAClBU,cAAeT,MAShB,MAAMU,EAA0CC,IAAwB,IAAAC,EAAAC,EAAAC,EAAAC,EAAA,IAAvB,SAAEC,EAAQ,KAAE5B,GAAMuB,EACxE,MAAMtB,EAAOD,EAAKE,WAClB,OACEC,EAAAA,cAAC0B,EAAAA,EAAG,CACFvB,MAAK,4BAA6BL,aAAI,EAAJA,EAAMK,OACxCwB,aAAa7B,SAAW,QAAPuB,EAAJvB,EAAMY,aAAK,IAAAW,GAAO,QAAPC,EAAXD,EAAaV,aAAK,IAAAW,OAAd,EAAJA,EAAoBK,eAAe7B,SAAW,QAAPyB,EAAJzB,EAAMY,aAAK,IAAAa,GAAO,QAAPC,EAAXD,EAAaZ,aAAK,IAAAa,OAAd,EAAJA,EAAoBZ,SACpEgB,SAAUH,EAASG,W","sources":["webpack://site-gruppo-natura-lentiai/./src/templates/post.tsx"],"sourcesContent":["// src/templates/post.tsx\nimport { PageProps, HeadFC, graphql } from \"gatsby\"\nimport { SEO } from \"../components/seo\"\nimport { IGatsbyImageData } from \"gatsby-plugin-image\"\nimport React from \"react\"\nimport DefaultLayout from \"../components/default-layout\"\nimport Post from \"../components/post\"\n\n// Definisci i tipi in base a ciò che ritorna la query\ntype PostData = {\n  sanityPost: {\n    title: string\n    publishedAt: string\n    _rawBody: any\n    author: string\n    image: {\n      asset: {\n        description: string\n        altText: string\n        title: string\n        gatsbyImageData: IGatsbyImageData\n      }\n    }\n  }\n}\n\n// pageContext conterrà solo lo slug che gli passiamo da gatsby-node\ntype PostPageContext = {\n  slug: string\n}\n\nconst PostTemplate: React.FC<PageProps<PostData, PostPageContext>> = ({\n  data,\n}) => {\n  const post = data.sanityPost\n\n  if (!post) {\n    return <DefaultLayout><p>Post non trovato</p></DefaultLayout>\n  }\n\n  const renderTitle = post.title || \"Loading...\"\n  const renderPublishedAt = post.publishedAt || null\n  const renderBody = post._rawBody || null\n  const author = post.author || null\n\n  const mainImgAlt = post.image?.asset?.altText || \"\"\n  const gatsbyImage = post.image?.asset?.gatsbyImageData || undefined\n  const renderImageUrl = null\n\n  return (\n    <DefaultLayout>\n      <Post\n        renderTitle={renderTitle}\n        renderPublishedAt={renderPublishedAt ?? \"\"}\n        gatsbyImage={gatsbyImage}\n        renderImageUrl={renderImageUrl ?? \"\"}\n        renderBody={renderBody}\n        author={author ?? \"\"}\n        coverImageAlt={mainImgAlt}\n      />\n    </DefaultLayout>\n  )\n}\n\nexport default PostTemplate\n\n// La Head query riceve i dati dalla query principale\nexport const Head: HeadFC<PostData, PostPageContext> = ({ location, data }) => {\n  const post = data.sanityPost\n  return (\n    <SEO\n      title={`Gruppo Natura Lentiai - ${post?.title}`}\n      description={post?.image?.asset?.description || post?.image?.asset?.altText}\n      pathname={location.pathname}\n    />\n  )\n}\n\n// QUESTA È LA MAGIA: Gatsby usa la variabile $slug dal pageContext per cercare il singolo post\nexport const query = graphql`\n  query SinglePostQuery($slug: String!) {\n    sanityPost(slug: { current: { eq: $slug } }) {\n      title\n      publishedAt\n      _rawBody\n      author\n      image {\n        asset {\n          description\n          altText\n          title\n          gatsbyImageData(\n            width: 1200\n            placeholder: BLURRED\n            formats: [AUTO, WEBP, AVIF]\n          )\n        }\n      }\n    }\n  }\n`"],"names":["_ref","_post$image","_post$image$asset","_post$image2","_post$image2$asset","data","post","sanityPost","React","DefaultLayout","renderTitle","title","renderPublishedAt","publishedAt","renderBody","_rawBody","author","mainImgAlt","image","asset","altText","gatsbyImage","gatsbyImageData","undefined","Post","renderImageUrl","coverImageAlt","Head","_ref2","_post$image3","_post$image3$asset","_post$image4","_post$image4$asset","location","SEO","description","pathname"],"sourceRoot":""}