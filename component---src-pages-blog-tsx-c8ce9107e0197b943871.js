"use strict";(self.webpackChunksite_gruppo_natura_lentiai=self.webpackChunksite_gruppo_natura_lentiai||[]).push([[663],{1763:function(e,t,n){n.d(t,{J1:function(){return a},Ns:function(){return i}});const a=e=>{if(!e)return null;const[,t,n,a]=e.match(/image-([^-]+)-(\d+x\d+)-(.+)/)||[];return t&&n&&a?"https://cdn.sanity.io/images/ze02ljgl/post-blog/"+t+"-"+n+"."+a:null},i=e=>e.filter(e=>"block"===e._type).map(e=>e.children.map(e=>{var t;return null!==(t=null==e?void 0:e.text)&&void 0!==t?t:""}).join("")).join(" ").slice(0,200).concat("...")},4553:function(e,t,n){n.r(t),n.d(t,{Head:function(){return P},default:function(){return A}});n(6910);var a=n(4506),i=n(6540),l=n(5048);var r=n(5588),o=n(9616),s=n(7693),d=n(1163);const u=o.default.div.withConfig({displayName:"styled__Container",componentId:"sc-tuxpxo-0"})(["margin-top:2rem;padding:2rem;padding-top:3rem;max-width:1200px;margin:0 auto;width:100%;box-sizing:border-box;@media (max-width:","px){padding:1.5rem 1rem;}"],s.O3.mobile),c=o.default.article.withConfig({displayName:"styled__FeaturedPostWrapper",componentId:"sc-tuxpxo-1"})(["margin-bottom:4rem;border-radius:12px;overflow:hidden;box-shadow:0 4px 12px ","66;cursor:pointer;background:#fff;transition:all 0.3s ease;display:flex;flex-direction:row;align-items:stretch;height:400px;&:hover{transform:translateY(-5px);box-shadow:0 8px 24px ","66;}@media (max-width:","){flex-direction:column;height:auto;}"],s.Tj.green.green600,s.Tj.green.green700,s.C9.bigtablet),m=o.default.div.withConfig({displayName:"styled__CoverImgWrapper",componentId:"sc-tuxpxo-2"})(["flex:",";.gatsby-image-wrapper,.cover-image{width:100%;height:",";object-fit:cover;@media (max-width:","){height:",";}@media (max-width:","){height:",";}}"],e=>{let{$isFeatured:t}=e;return t?"1":"none"},e=>{let{$isFeatured:t}=e;return t?"100%":"220px"},s.C9.bigtablet,e=>{let{$isFeatured:t}=e;return t?"350px":"220px"},s.C9.mobile,e=>{let{$isFeatured:t}=e;return t?"250px":"200px"}),g=o.default.div.withConfig({displayName:"styled__FeaturedContent",componentId:"sc-tuxpxo-3"})(["flex:1;padding:2.5rem;display:flex;flex-direction:column;justify-content:center;overflow:hidden;@media (max-width:","){padding:2rem;}@media (max-width:","){padding:1.5rem;}"],s.C9.bigtablet,s.C9.mobile),p=(0,o.default)(d.H2).withConfig({displayName:"styled__FeaturedTitle",componentId:"sc-tuxpxo-4"})(["margin:0 0 0.5rem;"]),x=(0,o.default)(d.P3).withConfig({displayName:"styled__MetaInfo",componentId:"sc-tuxpxo-5"})(["color:",";margin-bottom:1rem;font-style:italic;"],s.Tj.green.green600),f=o.default.div.withConfig({displayName:"styled__Grid",componentId:"sc-tuxpxo-6"})(["display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:2.5rem;@media (max-width:","px){grid-template-columns:1fr;}"],s.O3.mobile),h=o.default.article.withConfig({displayName:"styled__Card",componentId:"sc-tuxpxo-7"})(["border-radius:12px;overflow:hidden;box-shadow:0 2px 8px ","40;background:#fff;display:flex;flex-direction:column;cursor:pointer;transition:all 0.3s ease;&:hover{transform:translateY(-5px);box-shadow:0 8px 20px ","50;}"],s.Tj.green.green600,s.Tj.green.green700),v=o.default.div.withConfig({displayName:"styled__CardContent",componentId:"sc-tuxpxo-8"})(["padding:1.5rem;flex:1;display:flex;flex-direction:column;"]),b=(0,o.default)(d.H3).withConfig({displayName:"styled__CardTitle",componentId:"sc-tuxpxo-9"})(["margin:0 0 0.5rem;line-height:1.3;"]),y=(0,o.default)(d.P3).withConfig({displayName:"styled__CardExcerpt",componentId:"sc-tuxpxo-10"})(["margin:0;color:",";display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden;"],s.Tj.green.green900),w=o.default.div.withConfig({displayName:"styled__PaginationWrapper",componentId:"sc-tuxpxo-11"})(["display:flex;justify-content:center;align-items:center;gap:12px;margin-top:4rem;"]),C=o.default.button.withConfig({displayName:"styled__PageButton",componentId:"sc-tuxpxo-12"})(["background-color:",";color:",";border:none;border-radius:8px;width:45px;height:45px;font-size:16px;font-weight:bold;cursor:pointer;transition:all 0.3s ease;display:flex;align-items:center;justify-content:center;&:hover:not(:disabled){background-color:",";transform:translateY(-2px);}&:disabled{opacity:0.5;cursor:not-allowed;}"],e=>{let{$active:t}=e;return t?s.Tj.green.green600:s.Tj.green.green200},e=>{let{$active:t}=e;return t?s.Tj.green.green50:s.Tj.green.green900},e=>{let{$active:t}=e;return t?s.Tj.green.green700:s.Tj.green.green300});var I=n(4794);const _=e=>{var t,n;return e.coverImage.gatsbyImage?i.createElement(r.G,{image:e.coverImage.gatsbyImage,alt:null!==(t=e.coverImage.altText)&&void 0!==t?t:"Cover image"}):e.coverImage.renderImageUrl?i.createElement("img",{className:"cover-image",src:e.coverImage.renderImageUrl,alt:null!==(n=e.coverImage.altText)&&void 0!==n?n:"Cover image"}):null},E=e=>{let{posts:t,isFromPost:n}=e;const{0:l,1:r}=(0,i.useState)(1),o=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(n){const e=sessionStorage.getItem("gnl-blog-page");e&&r(parseInt(e,10))}else sessionStorage.removeItem("gnl-blog-page"),r(1)},[n]);if(!t||0===t.length)return i.createElement(d.P2,{style:{textAlign:"center",marginTop:"2rem"}},"Nessun articolo pubblicato al momento.");const s=(0,a.A)(t).sort((e,t)=>new Date(t.publishedAt).getTime()-new Date(e.publishedAt).getTime()),[E,...T]=s,j=Math.ceil(T.length/6),k=T.slice(6*(l-1),6*l),N=e=>{if(r(e),"undefined"!=typeof window&&sessionStorage.setItem("gnl-blog-page",e.toString()),o.current){const e=o.current.getBoundingClientRect().top+window.scrollY-100;window.scrollTo({top:e,behavior:"smooth"})}},A=Array(j).fill(0).map((e,t)=>t+1);return i.createElement(u,null,1===l&&i.createElement(c,{onClick:()=>(0,I.navigate)(""+E.slug)},i.createElement(m,{$isFeatured:!0},_(E)),i.createElement(g,null,i.createElement(d.P4,{style:{color:"#FE4A49",fontWeight:"bold",marginBottom:"0.5rem"}},"ULTIMO ARTICOLO"),i.createElement(p,null,E.title),i.createElement(x,null,new Date(E.publishedAt).toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," ","• ",E.author),i.createElement(d.P2,null,E.excerpt))),i.createElement("div",{ref:o},i.createElement(f,null,k.map(e=>i.createElement(h,{key:e.slug,onClick:()=>(0,I.navigate)(""+e.slug)},i.createElement(m,{$isFeatured:!1},_(e)),i.createElement(v,null,i.createElement(b,null,e.title),i.createElement(x,null,new Date(e.publishedAt).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"})),i.createElement(y,null,e.excerpt)))))),j>1&&i.createElement(w,null,i.createElement(C,{onClick:()=>N(l-1),disabled:1===l,"aria-label":"Pagina precedente"},"←"),A.map(e=>i.createElement(C,{key:e,$active:l===e,onClick:()=>N(e)},e)),i.createElement(C,{onClick:()=>N(l+1),disabled:l===j,"aria-label":"Pagina successiva"},"→")))};var T=n(1763),j=n(7559);const k=e=>"/post/1"!==e.slug&&"/post/2"!==e.slug,N=(e,t)=>new Date(e.publishedAt).getTime()-new Date(t.publishedAt).getTime();var A=e=>{var t;let{data:n,location:r}=e;const o=!0===(null===(t=r.state)||void 0===t?void 0:t.fromPost),s=(0,i.useMemo)(()=>(n.allSanityPost.nodes||[]).map(e=>{var t,n,a,i,l,r,o,s;return{id:e.id,title:e.title,publishedAt:e.publishedAt,author:e.author,slug:e.slug.current,excerpt:(0,T.Ns)(e._rawBody),coverImage:{description:null===(t=e.image)||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.description,altText:null===(a=e.image)||void 0===a||null===(i=a.asset)||void 0===i?void 0:i.altText,title:null===(l=e.image)||void 0===l||null===(r=l.asset)||void 0===r?void 0:r.title,gatsbyImage:(null===(o=e.image)||void 0===o||null===(s=o.asset)||void 0===s?void 0:s.gatsbyImageData)||null}}}),[n]),{0:d,1:u}=(0,i.useState)(s.filter(k).sort(N).reverse());return(0,i.useEffect)(()=>{(async()=>{try{var e,t;const n="query {\n          allPost {\n            _id\n            slug { current }\n            title\n            publishedAt\n            bodyRaw\n            author\n            image {\n              asset {\n                description\n                title\n                altText\n                url\n              }\n            }\n          }\n        }",i=await fetch("https://ze02ljgl.api.sanity.io/v2023-08-01/graphql/post-blog/default",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})}),l=await i.json();if(l.errors)throw new Error(l.errors[0].message);const r=(null!==(e=null===(t=l.data)||void 0===t?void 0:t.allPost)&&void 0!==e?e:[]).map(e=>{var t,n,a,i,l,r,o,s;return{id:e._id,title:e.title,publishedAt:e.publishedAt,author:e.author,slug:e.slug.current,excerpt:(0,T.Ns)(e.bodyRaw),coverImage:{description:null===(t=e.image)||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.description,altText:null===(a=e.image)||void 0===a||null===(i=a.asset)||void 0===i?void 0:i.altText,title:null===(l=e.image)||void 0===l||null===(r=l.asset)||void 0===r?void 0:r.title,renderImageUrl:(null===(o=e.image)||void 0===o||null===(s=o.asset)||void 0===s?void 0:s.url)||null}}}),o=(0,a.A)(s);r.forEach(e=>{o.some(t=>t.slug===e.slug)||o.push(e)}),u(o.filter(k).sort(N).reverse())}catch(n){console.error("Errore nel fetch remoto, uso i dati statici:",n)}})()},[s]),i.createElement(l.A,null,i.createElement(E,{posts:d,isFromPost:o}))};const P=e=>{let{location:t}=e;return i.createElement(j.k,{title:"Gruppo Natura Lentiai - Blog",pathname:t.pathname})}}}]);
//# sourceMappingURL=component---src-pages-blog-tsx-c8ce9107e0197b943871.js.map