"use strict";(self.webpackChunksite_gruppo_natura_lentiai=self.webpackChunksite_gruppo_natura_lentiai||[]).push([[666],{795:function(e,t,n){n.d(t,{Z:function(){return r}});const r="https://ze02ljgl.api.sanity.io/v2023-08-01/graphql/post-blog/default"},9988:function(e,t,n){n.r(t),n.d(t,{Head:function(){return s}});var r=n(6462),l=n(6540),a=n(9313),o=n(5372),u=n(795),i=n(7559);t.default=()=>{var e,t,n,i;const{pathname:s}=(0,r.useLocation)(),c=s,{0:d,1:p}=(0,l.useState)(null),{0:f,1:h}=(0,l.useState)(!0),{0:g,1:v}=(0,l.useState)(null),{0:m,1:y}=(0,l.useState)(!1);if((0,l.useEffect)(()=>{let e=!0;return(async()=>{try{h(!0),v(null);const t=await(async e=>{try{var t;const n="query {\n        allPost {\n          title\n          slug {\n            current\n          }\n          publishedAt\n          bodyRaw\n          author\n          image {\n            asset {\n              description\n              title\n              altText\n              url\n            }\n          }\n        }\n      }",r=await fetch(u.Z,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:n})}),l=await r.json();if(l.errors)throw new Error(l.errors[0].message);const a=((null===(t=l.data)||void 0===t?void 0:t.allPost)||[]).find(t=>{var n,r;return(null===(n=t.slug)||void 0===n?void 0:n.current)===e||(null===(r=t.slug)||void 0===r?void 0:r.current)===e.replace(/\/$/,"")});return a||(y(!0),null)}catch(n){return console.error("Error fetching post:",n),v("Failed to fetch post data."),null}})(c);if(!e)return;t?(p(t),y(!1)):y(!0)}catch(t){if(!e)return;console.error("Error in loadPost:",t),v("An error occurred while loading the post")}finally{e&&h(!1)}})(),()=>{e=!1}},[c]),(0,l.useEffect)(()=>{m&&"undefined"!=typeof window&&(0,r.navigate)("/404",{replace:!0}).catch(e=>{console.error("Navigation error:",e)})},[m,r.navigate]),f)return l.createElement(a.A,null,l.createElement("p",null,"Caricamento..."));if(g)return l.createElement(a.A,null,l.createElement("p",null,"Errore: ",g));if(m||!d)return null;const w=d.title,E=d.publishedAt,b=d.bodyRaw,A=d.author||null,S=(null===(e=d.image)||void 0===e||null===(t=e.asset)||void 0===t?void 0:t.altText)||"",_=(null===(n=d.image)||void 0===n||null===(i=n.asset)||void 0===i?void 0:i.url)||null;return f?l.createElement("p",null,"Caricamento..."):g||!d?("undefined"!=typeof window&&(0,r.navigate)("/404",{replace:!0}),null):l.createElement(a.A,null,l.createElement(o.A,{renderTitle:w,renderPublishedAt:null!=E?E:"",gatsbyImage:void 0,renderImageUrl:null!=_?_:"",renderBody:b,author:null!=A?A:"",coverImageAlt:S}))};const s=e=>{let{location:t}=e;return l.createElement(i.k,{title:"Gruppo Natura Lentiai",pathname:t.pathname})}}}]);
//# sourceMappingURL=component---src-templates-post-client-tsx-de55dff4795ba51c5a2a.js.map