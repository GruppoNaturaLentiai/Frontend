{"version":3,"file":"component---src-pages-blog-tsx-c8ce9107e0197b943871.js","mappings":"sMAEA,MAMaA,EAAqBC,IAChC,IAAKA,EAAK,OAAO,KAEjB,MAAO,CAAEC,EAAIC,EAAYC,GACvBH,EAAII,MAAM,iCAAmC,GAC/C,OAAKH,GAAOC,GAAeC,EAErB,mDAAoDF,EAAE,IAAIC,EAAU,IAAIC,EAFpC,MAK/BE,EAAwBC,GACnCA,EACGC,OAAQC,GAAuB,UAAZA,EAAEC,OACrBC,IAAKF,GAAWA,EAAEG,SAASD,IAAKE,IAAU,IAAAC,EAAA,OAAgB,QAAhBA,EAAKD,aAAK,EAALA,EAAOE,YAAI,IAAAD,EAAAA,EAAI,KAAIE,KAAK,KACvEA,KAAK,KACLC,MAAM,EAAG,KACTC,OAAO,M,oLCpBL,MAAMC,EAAYC,EAAAA,QAAOC,IAAGC,WAAA,CAAAC,YAAA,oBAAAC,YAAA,eAAVJ,CAAU,iKASZK,EAAAA,GAAcC,QAKxBC,EAAsBP,EAAAA,QAAOQ,QAAON,WAAA,CAAAC,YAAA,8BAAAC,YAAA,eAAdJ,CAAc,0UAItBS,EAAAA,GAAOC,MAAMC,SAaXF,EAAAA,GAAOC,MAAME,SAInBC,EAAAA,GAAWC,WAMrBC,EAAkBf,EAAAA,QAAOC,IAAGC,WAAA,CAAAC,YAAA,0BAAAC,YAAA,eAAVJ,CAAU,+JAC/BgB,IAAA,IAAC,YAAEC,GAAaD,EAAA,OAAMC,EAAc,IAAM,QAKtCC,IAAA,IAAC,YAAED,GAAaC,EAAA,OAAMD,EAAc,OAAS,SAIlCJ,EAAAA,GAAWC,UACpBK,IAAA,IAAC,YAAEF,GAAaE,EAAA,OAAMF,EAAc,QAAU,SAGrCJ,EAAAA,GAAWP,OACpBc,IAAA,IAAC,YAAEH,GAAaG,EAAA,OAAMH,EAAc,QAAU,UAKjDI,EAAkBrB,EAAAA,QAAOC,IAAGC,WAAA,CAAAC,YAAA,0BAAAC,YAAA,eAAVJ,CAAU,iLAQlBa,EAAAA,GAAWC,UAIXD,EAAAA,GAAWP,QAKrBgB,GAAgBtB,EAAAA,EAAAA,SAAOuB,EAAAA,IAAKrB,WAAA,CAAAC,YAAA,wBAAAC,YAAA,eAAZJ,CAAY,wBAI5BwB,GAAWxB,EAAAA,EAAAA,SAAOuB,EAAAA,IAAKrB,WAAA,CAAAC,YAAA,mBAAAC,YAAA,eAAZJ,CAAY,oDACzBS,EAAAA,GAAOC,MAAMC,UAKXc,EAAOzB,EAAAA,QAAOC,IAAGC,WAAA,CAAAC,YAAA,eAAAC,YAAA,eAAVJ,CAAU,2IAKPK,EAAAA,GAAcC,QAKxBoB,EAAO1B,EAAAA,QAAOQ,QAAON,WAAA,CAAAC,YAAA,eAAAC,YAAA,eAAdJ,CAAc,8NAGRS,EAAAA,GAAOC,MAAMC,SASVF,EAAAA,GAAOC,MAAME,UAI7Be,EAAc3B,EAAAA,QAAOC,IAAGC,WAAA,CAAAC,YAAA,sBAAAC,YAAA,eAAVJ,CAAU,+DAOxB4B,GAAY5B,EAAAA,EAAAA,SAAOuB,EAAAA,IAAKrB,WAAA,CAAAC,YAAA,oBAAAC,YAAA,eAAZJ,CAAY,wCAKxB6B,GAAc7B,EAAAA,EAAAA,SAAOuB,EAAAA,IAAKrB,WAAA,CAAAC,YAAA,sBAAAC,YAAA,gBAAZJ,CAAY,6GAE5BS,EAAAA,GAAOC,MAAMoB,UAQXC,EAAoB/B,EAAAA,QAAOC,IAAGC,WAAA,CAAAC,YAAA,4BAAAC,YAAA,gBAAVJ,CAAU,sFAQ9BgC,EAAahC,EAAAA,QAAOiC,OAAM/B,WAAA,CAAAC,YAAA,qBAAAC,YAAA,gBAAbJ,CAAa,2UACjBkC,IAAA,IAAC,QAAEC,GAASD,EAAA,OAAMC,EAAU1B,EAAAA,GAAOC,MAAMC,SAAWF,EAAAA,GAAOC,MAAM0B,UAC5EC,IAAA,IAAC,QAAEF,GAASE,EAAA,OAAMF,EAAU1B,EAAAA,GAAOC,MAAM4B,QAAU7B,EAAAA,GAAOC,MAAMoB,UAcnDS,IAAA,IAAC,QAAEJ,GAASI,EAAA,OAAMJ,EAAU1B,EAAAA,GAAOC,MAAME,SAAWH,EAAAA,GAAOC,MAAM8B,W,cCzIzF,MAAMC,EAAYC,IACkB,IAADC,EAOUC,EAP3C,OAAIF,EAAKG,WAAWC,YAEhBC,EAAAA,cAACC,EAAAA,EAAW,CACVC,MAAOP,EAAKG,WAAWC,YACvBI,IAA4B,QAAzBP,EAAED,EAAKG,WAAWM,eAAO,IAAAR,EAAAA,EAAI,gBAG3BD,EAAKG,WAAWO,eAEvBL,EAAAA,cAAA,OACEM,UAAU,cACVC,IAAKZ,EAAKG,WAAWO,eACrBF,IAA4B,QAAzBN,EAAEF,EAAKG,WAAWM,eAAO,IAAAP,EAAAA,EAAI,gBAI/B,MAGIW,EAAwCvC,IAA4B,IAA3B,MAAEwC,EAAK,WAAEC,GAAYzC,EAEzE,MAAM,EAAC0C,EAAY,EAACC,IAAkBC,EAAAA,EAAAA,UAAS,GACzCC,GAAUC,EAAAA,EAAAA,QAAuB,OAGvCC,EAAAA,EAAAA,WAAU,KACR,GAAIN,EAAY,CAEd,MAAMO,EAAYC,eAAeC,QAAQ,iBACrCF,GACFL,EAAeQ,SAASH,EAAW,IAEvC,MAEEC,eAAeG,WAAW,iBAC1BT,EAAe,IAEhB,CAACF,IAIJ,IAAKD,GAA0B,IAAjBA,EAAMa,OAClB,OAAOtB,EAAAA,cAACxB,EAAAA,GAAI,CAAC+C,MAAO,CAAEC,UAAW,SAAUC,UAAW,SAAU,0CAGlE,MAAMC,GAASC,EAAAA,EAAAA,GAAIlB,GAAOmB,KACxB,CAACC,EAAGC,IAAM,IAAIC,KAAKD,EAAEE,aAAaC,UAAY,IAAIF,KAAKF,EAAEG,aAAaC,YAGjEC,KAAaC,GAAUT,EACxBU,EAAaC,KAAKC,KAAKH,EAAOb,OAXb,GAYjBiB,EAAeJ,EAAOrF,MAZL,GAapB6D,EAAc,GAbM,EAcrBA,GAGI6B,EAAoBC,IAOxB,GANA7B,EAAe6B,GAEO,oBAAXC,QACTxB,eAAeyB,QAAQ,gBAAiBF,EAAKG,YAG3C9B,EAAQ+B,QAAS,CACnB,MAAMC,EAAUhC,EAAQ+B,QAAQE,wBAAwBC,IAAMN,OAAOO,QAAU,IAC/EP,OAAOQ,SAAS,CAAEF,IAAKF,EAASK,SAAU,UAC5C,GAIIC,EAAaC,MAAMjB,GAAYkB,KAAK,GAAG9G,IAAI,CAAC+G,EAAGC,IAAMA,EAAI,GAE/D,OACExD,EAAAA,cAACyD,EAAW,KAEO,IAAhB9C,GACCX,EAAAA,cAACyD,EAAqB,CAACC,QAASA,KAAMC,EAAAA,EAAAA,UAAS,GAAGzB,EAAS0B,OACzD5D,EAAAA,cAACyD,EAAiB,CAACvF,aAAa,GAC7BwB,EAASwC,IAEZlC,EAAAA,cAACyD,EAAiB,KAChBzD,EAAAA,cAACxB,EAAAA,GAAI,CAAC+C,MAAO,CAAEsC,MAAO,UAAWC,WAAY,OAAQC,aAAc,WAAY,mBAC/E/D,EAAAA,cAACyD,EAAe,KAAEvB,EAAS8B,OAC3BhE,EAAAA,cAACyD,EAAU,KACR,IAAI1B,KAAKG,EAASF,aAAaiC,mBAAmB,QAAS,CAC1DC,QAAS,OACTC,KAAM,UACNC,MAAO,OACPC,IAAK,YACH,IAAI,KACLnC,EAASoC,QAEdtE,EAAAA,cAACxB,EAAAA,GAAI,KAAE0D,EAASqC,WAMtBvE,EAAAA,cAAA,OAAKlE,IAAKgF,GACRd,EAAAA,cAACyD,EAAM,KACJlB,EAAa/F,IAAImD,GAChBK,EAAAA,cAACyD,EAAM,CAACe,IAAK7E,EAAKiE,KAAMF,QAASA,KAAMC,EAAAA,EAAAA,UAAS,GAAGhE,EAAKiE,OAEtD5D,EAAAA,cAACyD,EAAiB,CAACvF,aAAa,GAC7BwB,EAASC,IAEZK,EAAAA,cAACyD,EAAa,KACZzD,EAAAA,cAACyD,EAAW,KAAE9D,EAAKqE,OACnBhE,EAAAA,cAACyD,EAAU,KACR,IAAI1B,KAAKpC,EAAKqC,aAAaiC,mBAAmB,QAAS,CACtDE,KAAM,UACNC,MAAO,OACPC,IAAK,aAGTrE,EAAAA,cAACyD,EAAa,KAAE9D,EAAK4E,cAQ9BnC,EAAa,GACZpC,EAAAA,cAACyD,EAAmB,KAClBzD,EAAAA,cAACyD,EAAY,CACXC,QAASA,IAAMlB,EAAiB7B,EAAc,GAC9C8D,SAA0B,IAAhB9D,EACV,aAAW,qBACZ,KAIAyC,EAAW5G,IAAIiG,GACdzC,EAAAA,cAACyD,EAAY,CACXe,IAAK/B,EACLrD,QAASuB,IAAgB8B,EACzBiB,QAASA,IAAMlB,EAAiBC,IAE/BA,IAILzC,EAAAA,cAACyD,EAAY,CACXC,QAASA,IAAMlB,EAAiB7B,EAAc,GAC9C8D,SAAU9D,IAAgByB,EAC1B,aAAW,qBACZ,Q,wBCjJX,MAAMsC,EAAoB/E,GACV,YAAdA,EAAKiE,MAAoC,YAAdjE,EAAKiE,KAE5Be,EAAoBA,CAACC,EAAcC,IACvC,IAAI9C,KAAK6C,EAAG5C,aAAaC,UAAY,IAAIF,KAAK8C,EAAG7C,aAAaC,UAmIhE,MAjI4ChE,IAAwB,IAAA6G,EAAA,IAAvB,KAAEC,EAAI,SAAEC,GAAU/G,EAC7D,MAAMyC,GAAmD,KAAvB,QAAfoE,EAACE,EAASC,aAAK,IAAAH,OAAA,EAAfA,EAAyBI,UAGtCC,GAA0BC,EAAAA,EAAAA,SAAQ,KAC9BL,EAAKM,cAAcC,OAAS,IAAI9I,IAAI+I,IAAI,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,MAAK,CACnDhK,GAAIwJ,EAAKxJ,GACTiI,MAAOuB,EAAKvB,MACZhC,YAAauD,EAAKvD,YAClBsC,OAAQiB,EAAKjB,OACbV,KAAM2B,EAAK3B,KAAKf,QAChB0B,SAASpI,EAAAA,EAAAA,IAAqBoJ,EAAKS,UACnClG,WAAY,CACVmG,YAAuB,QAAZT,EAAED,EAAKrF,aAAK,IAAAsF,GAAO,QAAPC,EAAVD,EAAYU,aAAK,IAAAT,OAAP,EAAVA,EAAmBQ,YAChC7F,QAAmB,QAAZsF,EAAEH,EAAKrF,aAAK,IAAAwF,GAAO,QAAPC,EAAVD,EAAYQ,aAAK,IAAAP,OAAP,EAAVA,EAAmBvF,QAC5B4D,MAAiB,QAAZ4B,EAAEL,EAAKrF,aAAK,IAAA0F,GAAO,QAAPC,EAAVD,EAAYM,aAAK,IAAAL,OAAP,EAAVA,EAAmB7B,MAC1BjE,aAAuB,QAAV+F,EAAAP,EAAKrF,aAAK,IAAA4F,GAAO,QAAPC,EAAVD,EAAYI,aAAK,IAAAH,OAAP,EAAVA,EAAmBI,kBAAmB,SAGtD,CAACpB,KAEE,EAACtE,EAAK,EAAE2F,IAAYvF,EAAAA,EAAAA,UACxBsE,EAAY9I,OAAOqI,GAAkB9C,KAAK+C,GAAmB0B,WAsE/D,OAnEArF,EAAAA,EAAAA,WAAU,KACWsF,WACjB,IAAI,IAAAC,EAAAC,EACF,MAAMC,EAAQ,yWAmBRC,QAAiBC,MClF7B,uEDkFqD,CAC7CC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEP,YAGnBQ,QAAeP,EAASQ,OAC9B,GAAID,EAAOE,OAAQ,MAAM,IAAIC,MAAMH,EAAOE,OAAO,GAAGE,SAEpD,MAEMC,GAFqC,QAAvBf,EAAc,QAAdC,EAAGS,EAAOlC,YAAI,IAAAyB,OAAA,EAAXA,EAAae,eAAO,IAAAhB,EAAAA,EAAI,IAEA/J,IAAKgL,IAAM,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,MAAM,CAC9DjM,GAAIyL,EAAES,IACNjE,MAAOwD,EAAExD,MACThC,YAAawF,EAAExF,YACfsC,OAAQkD,EAAElD,OACVV,KAAM4D,EAAE5D,KAAKf,QACb0B,SAASpI,EAAAA,EAAAA,IAAqBqL,EAAEpL,SAChC0D,WAAY,CACVmG,YAAoB,QAATwB,EAAED,EAAEtH,aAAK,IAAAuH,GAAO,QAAPC,EAAPD,EAASvB,aAAK,IAAAwB,OAAP,EAAPA,EAAgBzB,YAC7B7F,QAAgB,QAATuH,EAAEH,EAAEtH,aAAK,IAAAyH,GAAO,QAAPC,EAAPD,EAASzB,aAAK,IAAA0B,OAAP,EAAPA,EAAgBxH,QACzB4D,MAAc,QAAT6D,EAAEL,EAAEtH,aAAK,IAAA2H,GAAO,QAAPC,EAAPD,EAAS3B,aAAK,IAAA4B,OAAP,EAAPA,EAAgB9D,MACvB3D,gBAAuB,QAAP0H,EAAAP,EAAEtH,aAAK,IAAA6H,GAAO,QAAPC,EAAPD,EAAS7B,aAAK,IAAA8B,OAAP,EAAPA,EAAgBE,MAAO,SAKrCC,GAAQxG,EAAAA,EAAAA,GAAOwD,GACrBmC,EAAYc,QAAQC,IACbF,EAASG,KAAKC,GAAMA,EAAG3E,OAASyE,EAAGzE,OACtCuE,EAASK,KAAKH,KAIlBjC,EACE+B,EAAS9L,OAAOqI,GAAkB9C,KAAK+C,GAAmB0B,UAE9D,CAAE,MAAOoC,GACPC,QAAQC,MAAM,+CAAgDF,EAChE,GAGFG,IACC,CAACzD,IAGFnF,EAAAA,cAAC6I,EAAAA,EAAa,KACZ7I,EAAAA,cAACQ,EAAY,CAACC,MAAOA,EAAOC,WAAYA,MAqCvC,MAAMoI,EAAe3K,IAAA,IAAC,SAAE6G,GAAU7G,EAAA,OACvC6B,EAAAA,cAAC+I,EAAAA,EAAG,CAAC/E,MAAM,+BAA+BgF,SAAUhE,EAASgE,W","sources":["webpack://site-gruppo-natura-lentiai/./src/helpers.ts","webpack://site-gruppo-natura-lentiai/./src/components/blog-list/styled.ts","webpack://site-gruppo-natura-lentiai/./src/components/blog-list/index.tsx","webpack://site-gruppo-natura-lentiai/./src/pages/blog.tsx","webpack://site-gruppo-natura-lentiai/./src/constants.ts"],"sourcesContent":["import { pathPrefix } from \"./constants\"\n\nconst stripTrailingSlash = (str: string) =>\n  str.endsWith(\"/\") ? str.slice(0, -1) : str\n\nexport const cleanSlug = (str: string) =>\n  stripTrailingSlash(str.replace(pathPrefix, \"\"))\n\nexport const getSanityImageUrl = (ref: string) => {\n  if (!ref) return null\n\n  const [, id, dimensions, format] =\n    ref.match(/image-([^-]+)-(\\d+x\\d+)-(.+)/) || []\n  if (!id || !dimensions || !format) return null\n\n  return `https://cdn.sanity.io/images/ze02ljgl/post-blog/${id}-${dimensions}.${format}`\n}\n\nexport const fromBodyRawToExcerpt = (bodyRaw: any) =>\n  bodyRaw\n    .filter((c: any) => c._type === \"block\")\n    .map((c: any) => c.children.map((child: any) => child?.text ?? \"\").join(\"\"))\n    .join(\" \")\n    .slice(0, 200)\n    .concat(\"...\")\n","import styled from \"styled-components\"\nimport { breakpoint, breakpointNum, colors } from \"../../styles\"\nimport * as T from \"../typography\"\n\nexport const Container = styled.div`\n  margin-top: 2rem;\n  padding: 2rem;\n  padding-top: 3rem;\n  max-width: 1200px; \n  margin: 0 auto;\n  width: 100%; \n  box-sizing: border-box; \n\n  @media (max-width: ${breakpointNum.mobile}px) {\n    padding: 1.5rem 1rem; \n  }\n`\n\nexport const FeaturedPostWrapper = styled.article`\n  margin-bottom: 4rem;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 12px ${colors.green.green600}66;\n  cursor: pointer;\n  background: #fff;\n  transition: all 0.3s ease;\n  display: flex;\n  flex-direction: row; \n  align-items: stretch;\n  \n  /* Sostituisci max-height con height fisso per forzare la forma del banner su Desktop */\n  height: 400px; \n\n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 8px 24px ${colors.green.green700}66;\n  }\n\n  /* Spostiamo il passaggio a colonna ai 900px (bigtablet) per evitare schiacciamenti */\n  @media (max-width: ${breakpoint.bigtablet}) {\n    flex-direction: column; \n    height: auto; /* Sblocchiamo l'altezza in verticale per far adattare il testo */\n  }\n`\n\nexport const CoverImgWrapper = styled.div<{ $isFeatured?: boolean }>`\n  flex: ${({ $isFeatured }) => ($isFeatured ? \"1\" : \"none\")};\n  \n  .gatsby-image-wrapper, .cover-image {\n    width: 100%;\n    /* Su desktop l'immagine prende tutta l'altezza (i 400px definiti sopra) */\n    height: ${({ $isFeatured }) => ($isFeatured ? \"100%\" : \"220px\")};\n    object-fit: cover;\n    \n    /* FIX PER TABLET/MOBILE: Quando andiamo in colonna, diamo un'altezza massima fissa all'immagine in evidenza */\n    @media (max-width: ${breakpoint.bigtablet}) {\n      height: ${({ $isFeatured }) => ($isFeatured ? \"350px\" : \"220px\")};\n    }\n    \n    @media (max-width: ${breakpoint.mobile}) {\n      height: ${({ $isFeatured }) => ($isFeatured ? \"250px\" : \"200px\")};\n    }\n  }\n`\n\nexport const FeaturedContent = styled.div`\n  flex: 1;\n  padding: 2.5rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  overflow: hidden;\n\n  @media (max-width: ${breakpoint.bigtablet}) {\n    padding: 2rem;\n  }\n\n  @media (max-width: ${breakpoint.mobile}) {\n    padding: 1.5rem;\n  }\n`\n\nexport const FeaturedTitle = styled(T.H2)`\n  margin: 0 0 0.5rem;\n`\n\nexport const MetaInfo = styled(T.P3)`\n  color: ${colors.green.green600};\n  margin-bottom: 1rem;\n  font-style: italic;\n`\n\nexport const Grid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n  gap: 2.5rem;\n\n  @media (max-width: ${breakpointNum.mobile}px) {\n    grid-template-columns: 1fr; /* Forza una singola colonna perfetta su smartphone */\n  }\n`\n\nexport const Card = styled.article`\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 2px 8px ${colors.green.green600}40;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 8px 20px ${colors.green.green700}50;\n  }\n`\n\nexport const CardContent = styled.div`\n  padding: 1.5rem;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n`\n\nexport const CardTitle = styled(T.H3)`\n  margin: 0 0 0.5rem;\n  line-height: 1.3;\n`\n\nexport const CardExcerpt = styled(T.P3)`\n  margin: 0;\n  color: ${colors.green.green900};\n  display: -webkit-box;\n  -webkit-line-clamp: 3; /* Tronca il testo dopo 3 righe */\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n`\n\n/* --- NUOVI STILI PER LA PAGINAZIONE --- */\nexport const PaginationWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 12px;\n  margin-top: 4rem;\n`\n\nexport const PageButton = styled.button<{ $active?: boolean }>`\n  background-color: ${({ $active }) => ($active ? colors.green.green600 : colors.green.green200)};\n  color: ${({ $active }) => ($active ? colors.green.green50 : colors.green.green900)};\n  border: none;\n  border-radius: 8px;\n  width: 45px;\n  height: 45px;\n  font-size: 16px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  &:hover:not(:disabled) {\n    background-color: ${({ $active }) => ($active ? colors.green.green700 : colors.green.green300)};\n    transform: translateY(-2px);\n  }\n\n  &:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n  }\n`","import React, { useState, useRef, useEffect } from \"react\"\nimport { IGatsbyImageData, GatsbyImage } from \"gatsby-plugin-image\"\nimport * as S from \"./styled\"\nimport * as T from \"../typography\"\nimport { navigate } from \"gatsby\"\n\n// Props injected during build time\nexport type PostInfo = {\n  slug: string\n  title: string\n  publishedAt: string\n  author: string\n  excerpt: string\n  coverImage: {\n    description?: string\n    altText: string\n    title?: string\n    gatsbyImage?: IGatsbyImageData | null\n    renderImageUrl?: string\n  }\n}\n\ninterface BlogListProps {\n  posts: PostInfo[]\n  isFromPost?: boolean\n}\n\nconst getImage = (post: PostInfo) => {\n  if (post.coverImage.gatsbyImage) {\n    return (\n      <GatsbyImage\n        image={post.coverImage.gatsbyImage as IGatsbyImageData}\n        alt={post.coverImage.altText ?? \"Cover image\"}\n      />\n    )\n  } else if (post.coverImage.renderImageUrl) {\n    return (\n      <img\n        className=\"cover-image\"\n        src={post.coverImage.renderImageUrl}\n        alt={post.coverImage.altText ?? \"Cover image\"}\n      />\n    )\n  }\n  return null\n}\n\nexport const FeaturedBlog: React.FC<BlogListProps> = ({ posts, isFromPost }) => {\n  // Inizializziamo a 1 di default\n  const [currentPage, setCurrentPage] = useState(1)\n  const gridRef = useRef<HTMLDivElement>(null)\n\n  // Quando il componente viene montato, controlla se c'è una pagina salvata in memoria\n  useEffect(() => {\n    if (isFromPost) {\n      // Se arriviamo da un post, ripristiniamo la pagina salvata\n      const savedPage = sessionStorage.getItem(\"gnl-blog-page\")\n      if (savedPage) {\n        setCurrentPage(parseInt(savedPage, 10))\n      }\n    } else {\n      // Se arriviamo da qualsiasi altra parte (es. Menu), resettiamo a 1 e puliamo la memoria\n      sessionStorage.removeItem(\"gnl-blog-page\")\n      setCurrentPage(1)\n    }\n  }, [isFromPost])\n\n  const POSTS_PER_PAGE = 6\n\n  if (!posts || posts.length === 0) {\n    return <T.P2 style={{ textAlign: \"center\", marginTop: \"2rem\" }}>Nessun articolo pubblicato al momento.</T.P2>\n  }\n\n  const sorted = [...posts].sort(\n    (a, b) => new Date(b.publishedAt).getTime() - new Date(a.publishedAt).getTime(),\n  )\n\n  const [featured, ...others] = sorted\n  const totalPages = Math.ceil(others.length / POSTS_PER_PAGE)\n  const currentPosts = others.slice(\n    (currentPage - 1) * POSTS_PER_PAGE,\n    currentPage * POSTS_PER_PAGE\n  )\n\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page)\n    // SALVA LA PAGINA IN MEMORIA!\n    if (typeof window !== \"undefined\") {\n      sessionStorage.setItem(\"gnl-blog-page\", page.toString())\n    }\n\n    if (gridRef.current) {\n      const yOffset = gridRef.current.getBoundingClientRect().top + window.scrollY - 100\n      window.scrollTo({ top: yOffset, behavior: \"smooth\" })\n    }\n  }\n\n  // Sostituito Array.from con un approccio funzionale standard\n  const pagesArray = Array(totalPages).fill(0).map((_, i) => i + 1)\n\n  return (\n    <S.Container>\n      {/* Mostra il post in evidenza SOLO nella prima pagina */}\n      {currentPage === 1 && (\n        <S.FeaturedPostWrapper onClick={() => navigate(`${featured.slug}`)}>\n          <S.CoverImgWrapper $isFeatured={true}>\n            {getImage(featured)}\n          </S.CoverImgWrapper>\n          <S.FeaturedContent>\n            <T.P4 style={{ color: \"#FE4A49\", fontWeight: \"bold\", marginBottom: \"0.5rem\" }}>ULTIMO ARTICOLO</T.P4>\n            <S.FeaturedTitle>{featured.title}</S.FeaturedTitle>\n            <S.MetaInfo>\n              {new Date(featured.publishedAt).toLocaleDateString(\"it-IT\", {\n                weekday: \"long\",\n                year: \"numeric\",\n                month: \"long\",\n                day: \"numeric\",\n              })}{\" \"}\n              • {featured.author}\n            </S.MetaInfo>\n            <T.P2>{featured.excerpt}</T.P2>\n          </S.FeaturedContent>\n        </S.FeaturedPostWrapper>\n      )}\n\n      {/* Griglia post successivi paginata */}\n      <div ref={gridRef}>\n        <S.Grid>\n          {currentPosts.map(post => (\n            <S.Card key={post.slug} onClick={() => navigate(`${post.slug}`)}>\n              {/* ... (Lascia intatto il contenuto della Card) ... */}\n              <S.CoverImgWrapper $isFeatured={false}>\n                {getImage(post)}\n              </S.CoverImgWrapper>\n              <S.CardContent>\n                <S.CardTitle>{post.title}</S.CardTitle>\n                <S.MetaInfo>\n                  {new Date(post.publishedAt).toLocaleDateString(\"it-IT\", {\n                    year: \"numeric\",\n                    month: \"long\",\n                    day: \"numeric\",\n                  })}\n                </S.MetaInfo>\n                <S.CardExcerpt>{post.excerpt}</S.CardExcerpt>\n              </S.CardContent>\n            </S.Card>\n          ))}\n        </S.Grid>\n      </div>\n\n      {/* Controlli Paginazione aggiornati */}\n      {totalPages > 1 && (\n        <S.PaginationWrapper>\n          <S.PageButton\n            onClick={() => handlePageChange(currentPage - 1)}\n            disabled={currentPage === 1}\n            aria-label=\"Pagina precedente\"\n          >\n            &#8592;\n          </S.PageButton>\n\n          {pagesArray.map(page => (\n            <S.PageButton\n              key={page}\n              $active={currentPage === page}\n              onClick={() => handlePageChange(page)}\n            >\n              {page}\n            </S.PageButton>\n          ))}\n\n          <S.PageButton\n            onClick={() => handlePageChange(currentPage + 1)}\n            disabled={currentPage === totalPages}\n            aria-label=\"Pagina successiva\"\n          >\n            &#8594;\n          </S.PageButton>\n        </S.PaginationWrapper>\n      )}\n    </S.Container>\n  )\n}","import { graphql, HeadFC, PageProps } from \"gatsby\"\nimport React, { useEffect, useMemo, useState } from \"react\"\nimport DefaultLayout from \"../components/default-layout\"\nimport { remoteGraphqlURL } from \"../constants\"\nimport { FeaturedBlog, PostInfo } from \"../components/blog-list\"\nimport { fromBodyRawToExcerpt } from \"../helpers\"\nimport { SEO } from \"../components/seo\"\n\n// Definiamo il tipo per i dati che arrivano dalla query GraphQL di Gatsby\ntype BlogData = {\n  allSanityPost: {\n    nodes: Array<{\n      id: string\n      title: string\n      publishedAt: string\n      _rawBody: any\n      author: string\n      slug: { current: string }\n      image: {\n        asset: {\n          description: string\n          altText: string\n          title: string\n          gatsbyImageData: any\n        }\n      }\n    }>\n  }\n}\n\nconst filterDummyPosts = (post: PostInfo) =>\n  post.slug !== \"/post/1\" && post.slug !== \"/post/2\"\n\nconst sortByPublishedAt = (p1: PostInfo, p2: PostInfo) =>\n  new Date(p1.publishedAt).getTime() - new Date(p2.publishedAt).getTime()\n\nconst Blog: React.FC<PageProps<BlogData>> = ({ data, location }) => {\n  const isFromPost = (location.state as any)?.fromPost === true\n\n  // Trasformiamo i dati statici di Gatsby nel formato PostInfo\n  const staticPosts: PostInfo[] = useMemo(() => {\n    return (data.allSanityPost.nodes || []).map(node => ({\n      id: node.id,\n      title: node.title,\n      publishedAt: node.publishedAt,\n      author: node.author,\n      slug: node.slug.current,\n      excerpt: fromBodyRawToExcerpt(node._rawBody),\n      coverImage: {\n        description: node.image?.asset?.description,\n        altText: node.image?.asset?.altText,\n        title: node.image?.asset?.title,\n        gatsbyImage: node.image?.asset?.gatsbyImageData || null,\n      },\n    }))\n  }, [data])\n\n  const [posts, setPosts] = useState<PostInfo[]>(\n    staticPosts.filter(filterDummyPosts).sort(sortByPublishedAt).reverse()\n  )\n\n  useEffect(() => {\n    const fetchPosts = async () => {\n      try {\n        const query = `query {\n          allPost {\n            _id\n            slug { current }\n            title\n            publishedAt\n            bodyRaw\n            author\n            image {\n              asset {\n                description\n                title\n                altText\n                url\n              }\n            }\n          }\n        }`\n\n        const response = await fetch(remoteGraphqlURL, {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({ query }),\n        })\n\n        const result = await response.json()\n        if (result.errors) throw new Error(result.errors[0].message)\n\n        const remotePostsRaw = result.data?.allPost ?? []\n\n        const remotePosts: PostInfo[] = remotePostsRaw.map((p: any) => ({\n          id: p._id,\n          title: p.title,\n          publishedAt: p.publishedAt,\n          author: p.author,\n          slug: p.slug.current,\n          excerpt: fromBodyRawToExcerpt(p.bodyRaw),\n          coverImage: {\n            description: p.image?.asset?.description,\n            altText: p.image?.asset?.altText,\n            title: p.image?.asset?.title,\n            renderImageUrl: p.image?.asset?.url || null,\n          },\n        }))\n\n        // Uniamo i post statici con quelli remoti (evitando duplicati)\n        const combined = [...staticPosts]\n        remotePosts.forEach(rp => {\n          if (!combined.some(cp => cp.slug === rp.slug)) {\n            combined.push(rp)\n          }\n        })\n\n        setPosts(\n          combined.filter(filterDummyPosts).sort(sortByPublishedAt).reverse()\n        )\n      } catch (err: any) {\n        console.error(\"Errore nel fetch remoto, uso i dati statici:\", err)\n      }\n    }\n\n    fetchPosts()\n  }, [staticPosts])\n\n  return (\n    <DefaultLayout>\n      <FeaturedBlog posts={posts} isFromPost={isFromPost} />\n    </DefaultLayout>\n  )\n}\n\n// Questa query viene eseguita da Gatsby a tempo di build\nexport const query = graphql`\n  query BlogPageQuery {\n    allSanityPost(sort: { publishedAt: DESC }) {\n      nodes {\n        id\n        title\n        publishedAt\n        _rawBody\n        author\n        slug {\n          current\n        }\n        image {\n          asset {\n            description\n            altText\n            title\n            gatsbyImageData(\n              width: 800\n              placeholder: BLURRED\n              formats: [AUTO, WEBP, AVIF]\n            )\n          }\n        }\n      }\n    }\n  }\n`\n\nexport default Blog\n\nexport const Head: HeadFC = ({ location }) => (\n  <SEO title=\"Gruppo Natura Lentiai - Blog\" pathname={location.pathname} />\n)","export const remoteGraphqlURL =\n  \"https://ze02ljgl.api.sanity.io/v2023-08-01/graphql/post-blog/default\" as const\n\n// export const pathPrefix = \"/Frontend\" as const // old when hosted in https://grupponaturalentiai.github.io/Frontend\nexport const pathPrefix = \"\" // actual having bought the domain\n"],"names":["getSanityImageUrl","ref","id","dimensions","format","match","fromBodyRawToExcerpt","bodyRaw","filter","c","_type","map","children","child","_child$text","text","join","slice","concat","Container","styled","div","withConfig","displayName","componentId","breakpointNum","mobile","FeaturedPostWrapper","article","colors","green","green600","green700","breakpoint","bigtablet","CoverImgWrapper","_ref","$isFeatured","_ref2","_ref3","_ref4","FeaturedContent","FeaturedTitle","T","MetaInfo","Grid","Card","CardContent","CardTitle","CardExcerpt","green900","PaginationWrapper","PageButton","button","_ref5","$active","green200","_ref6","green50","_ref7","green300","getImage","post","_post$coverImage$altT","_post$coverImage$altT2","coverImage","gatsbyImage","React","GatsbyImage","image","alt","altText","renderImageUrl","className","src","FeaturedBlog","posts","isFromPost","currentPage","setCurrentPage","useState","gridRef","useRef","useEffect","savedPage","sessionStorage","getItem","parseInt","removeItem","length","style","textAlign","marginTop","sorted","_toConsumableArray","sort","a","b","Date","publishedAt","getTime","featured","others","totalPages","Math","ceil","currentPosts","handlePageChange","page","window","setItem","toString","current","yOffset","getBoundingClientRect","top","scrollY","scrollTo","behavior","pagesArray","Array","fill","_","i","S","onClick","navigate","slug","color","fontWeight","marginBottom","title","toLocaleDateString","weekday","year","month","day","author","excerpt","key","disabled","filterDummyPosts","sortByPublishedAt","p1","p2","_location$state","data","location","state","fromPost","staticPosts","useMemo","allSanityPost","nodes","node","_node$image","_node$image$asset","_node$image2","_node$image2$asset","_node$image3","_node$image3$asset","_node$image4","_node$image4$asset","_rawBody","description","asset","gatsbyImageData","setPosts","reverse","async","_result$data$allPost","_result$data","query","response","fetch","method","headers","body","JSON","stringify","result","json","errors","Error","message","remotePosts","allPost","p","_p$image","_p$image$asset","_p$image2","_p$image2$asset","_p$image3","_p$image3$asset","_p$image4","_p$image4$asset","_id","url","combined","forEach","rp","some","cp","push","err","console","error","fetchPosts","DefaultLayout","Head","SEO","pathname"],"sourceRoot":""}